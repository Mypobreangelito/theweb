---
import Base from "../layouts/Base.astro";
import { getCollection } from "astro:content";

const escritos = (await getCollection("escritos"))
  .filter((p) => !p.data.draft)
  .sort((a, b) => b.data.date.getTime() - a.data.date.getTime());

const title = "Journal — Pensamientos";
const description = "Un espacio donde comparto reflexiones, ciencia y poesía.";
---

<Base {title} {description}>
  <main class="mx-auto max-w-5xl px-4 py-10">
    <header class="mb-10 text-center">
      <h1 class="text-3xl font-bold">{title}</h1>
      <p class="text-slate-600 mt-2">{description}</p>
    </header>

    <section class="grid gap-8">
      {escritos.map(({ slug, data }) => (
        <a
          href={`/pensamientos/${slug}/`}
          class="block rounded-xl border p-6 hover:shadow-lg transition"
        >
          <h2 class="text-xl font-semibold">{data.title}</h2>
          <p class="text-sm text-slate-500 mt-1">
            {data.date.toLocaleDateString("es-MX", {
              year: "numeric",
              month: "long",
              day: "numeric",
            })}
          </p>
          {data.description && <p class="mt-3">{data.description}</p>}
        </a>
      ))}
    </section>
  </main>
</Base>